{"version":3,"sources":["DetailsModal.js","Message.js","modules/nano-webgl-pow.js","utilities.js","NewMessageModal.js","giphy.png","Policy.js","Home.js","Demo.js","App.js","reportWebVitals.js","index.js"],"names":["DetailsModal","props","this","handleModal","Dialog","onClose","handleClose","aria-labelledby","open","maxWidth","DialogTitle","id","DialogContent","dividers","TableContainer","Table","size","TableBody","TableRow","TableCell","style","fontWeight","message","first_timestamp","moment","format","timestamp","Link","href","author","target","channel","blocks","map","block","index","checksum_block","broadcast_block","DialogActions","Button","onClick","color","React","Component","Message","state","setState","modalOpen","cleanedMessage","replace","backgroundColor","slice","Card","margin","whiteSpace","CardContent","Typography","variant","component","CardActions","width","float","padding","textAlign","defaultThreshold","defaultSize","array_hex","arr","length","out","i","toString","hex_reverse","hex","calculate","hashHex","threshold","height","callback","progressCallback","canvas","document","createElement","gl","getContext","Error","test","clearColor","reverseHex","vsSource","fsSource","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","triangleArray","createVertexArray","bindVertexArray","positions","Float32Array","positionBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","vertexAttribPointer","FLOAT","enableVertexAttribArray","uvPosArray","uvBuffer","work0Location","getUniformLocation","work1Location","work0","Uint8Array","work1","n","draw","window","crypto","getRandomValues","uniform4uiv","Array","from","clear","COLOR_BUFFER_BIT","drawArrays","TRIANGLES","pixels","drawingBufferWidth","drawingBufferHeight","readPixels","RGBA","UNSIGNED_BYTE","requestAnimationFrame","representative","messagePrice","encoding","chars","bits","getSeed","a","seed","localStorage","getItem","nanocurrency","setItem","getSecretKey","parseInt","secretKey","getPublicKey","publicKey","getCurrentAddr","useNanoPrefix","address","getNextAddress","incrementAddressIndex","getDifficulty","Date","now","fetch","then","res","json","difficulty","receive","network_receive_current","send","network_current","JSON","stringify","parse","getAccountInfo","getAccountHistory","getPending","computeWork","hash","type","method","body","headers","cloudWork","work","Promise","resolve","setTimeout","realDifficulty","webglpow","processBlock","blockString","Object","keys","key","encodeURIComponent","receiveAll","accountInfo","balance","bigInt","frontier","pending","hashes","done","total","add","amount","link","previous","receiveBlock","getMessageSendAddresses","messageEncoded","encodeMessage","clearUnicodeChars","addresses","match","c","createMessageChunkAddess","checksum","sha256","substring","push","getMessageInfo","decodedChecksum","decodeMessage","extractMessageFromAddress","split","isNaN","repeat","string","codec","charCodeAt","charArray","cleanArray","ASCIIFolder","join","returnArray","loose","err","String","fromCharCode","apply","partialAddress","addressCharArray","blake","reverse","getBlockTimestamp","time","sessionStorage","local_timestamp","channelAddress","sendAddresses","nextAddress","compare","sendAddress","multiply","sendBlock","getMessagesInChannel","limit","realLimit","messages","messagesHashes","sort","b","source","history","historyBlocks","found","j","checksumBlock","messageInfo","account","chunks","messageObj","enoughBalance","chunksCount","getChannelAddress","toLowerCase","trim","NewMessageModal","handleMessage","e","value","goToStep2","startSending","currentStep","goToStep3","dynamicMessage","utilities","status","progress","changeGif","lastGifChange","gifs","gif","Math","floor","random","sending","updateMessages","sendLink","prevProps","fullWidth","disableBackdropClick","disableEscapeKeyDown","TextField","autoFocus","label","multiline","rows","onChange","marginTop","ceil","display","pow","src","cursor","position","top","marginLeft","background","disabled","Policy","marginBottom","accept","Home","acceptPolicy","showPolicy","setInterval","handleNewMessageModal","newMessageModal","loading","messagesLimit","channelTimeout","clearTimeout","channelName","messageLimit","Container","Paper","elevation","className","handleChannelUpdate","m","Alert","severity","AlertTitle","changeChannel","handleLoadMore","CircularProgress","Demo","cleaned","encoded","checksumEncoded","channelEncoded","messageTimer","handleMessageChange","handleChannelChange","channelClean","InputProps","readOnly","withRouter","App","path","exact","to","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.caeb4812.chunk.js","sourcesContent":["import React from 'react';\nimport * as moment from 'moment'\n\nimport Dialog from '@material-ui/core/Dialog';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Link from '@material-ui/core/Link';\n\nclass DetailsModal extends React.Component {\n    constructor(props) {\n        super(props)\n    }\n\n    handleClose() {\n        this.props.handleModal(false);\n    }\n\n    render() {\n        return (\n            <Dialog onClose={() => this.handleClose()} aria-labelledby=\"customized-dialog-title\" open={this.props.open} maxWidth=\"100%\">\n                <DialogTitle id=\"customized-dialog-title\" onClose={() => this.handleClose()}>\n                    Message details\n                </DialogTitle>\n                <DialogContent dividers>\n                    <TableContainer>\n                        <Table size=\"small\">\n                            <TableBody>\n                                <TableRow key=\"1\">\n                                    <TableCell style={{fontWeight: '500'}}>First block timestamp</TableCell>\n                                    <TableCell>{this.props.message.first_timestamp} - {moment(this.props.message.first_timestamp * 1000).format(\"DD/MM/YYYY HH:mm:ss\")}</TableCell>\n                                </TableRow>\n                                <TableRow key=\"2\">\n                                    <TableCell style={{fontWeight: '500'}}>Last block timestamp</TableCell>\n                                    <TableCell>{this.props.message.timestamp} - {moment(this.props.message.timestamp * 1000).format(\"DD/MM/YYYY HH:mm:ss\")}</TableCell>\n                                </TableRow>\n                                <TableRow key=\"3\">\n                                    <TableCell style={{fontWeight: '500'}}>Author address</TableCell>\n                                    <TableCell><Link href={\"https://nanocrawler.cc/explorer/account/\" + this.props.message.author} target=\"_blank\">{this.props.message.author}</Link></TableCell>\n                                </TableRow>\n                                <TableRow key=\"31\">\n                                    <TableCell style={{fontWeight: '500'}}>Channel address</TableCell>\n                                    <TableCell><Link href={\"https://nanocrawler.cc/explorer/account/\" + this.props.channel} target=\"_blank\">{this.props.channel}</Link></TableCell>\n                                </TableRow>\n                                {this.props.message.blocks.map((block, index) => {\n                                    return (\n                                        <TableRow key={\"4\" + index}>\n                                            <TableCell style={{fontWeight: '500'}}>Block #{index+1}</TableCell>\n                                            <TableCell><Link href={\"https://nanocrawler.cc/explorer/block/\" + block} target=\"_blank\">{block}</Link></TableCell>\n                                        </TableRow>\n                                    )\n                                })}\n                                <TableRow key=\"5\">\n                                    <TableCell style={{fontWeight: '500'}}>Checksum block</TableCell>\n                                    <TableCell><Link href={\"https://nanocrawler.cc/explorer/block/\" + this.props.message.checksum_block} target=\"_blank\">{this.props.message.checksum_block}</Link></TableCell>\n                                </TableRow>\n                                <TableRow key=\"6\">\n                                    <TableCell style={{fontWeight: '500'}}>Broadcast block</TableCell>\n                                    <TableCell><Link href={\"https://nanocrawler.cc/explorer/block/\" + this.props.message.broadcast_block} target=\"_blank\">{this.props.message.broadcast_block}</Link></TableCell>\n                                </TableRow>\n                            </TableBody>\n                        </Table>\n                    </TableContainer>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.handleClose()} color=\"primary\">\n                        Close\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        )\n    }\n}\n\nexport default DetailsModal\n","import React from 'react';\nimport DetailsModal from './DetailsModal'\nimport * as moment from 'moment'\n\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nclass Message extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {modalOpen: false}\n    }\n\n    handleModal = (state) => {\n        this.setState({modalOpen: state})\n    }\n\n    render() {\n        const reg = /[\\r\\n]{2,}/g;\n        const cleanedMessage = this.props.message.message.replace(reg, \"\\n\\n\");\n        const backgroundColor = '#' + this.props.message.broadcast_block.slice(0, 2) + this.props.message.broadcast_block.slice(8, 10) + this.props.message.broadcast_block.slice(-2) + '28'\n        return (\n            <Card style={{margin: '16px 4px', backgroundColor: backgroundColor, whiteSpace: 'pre-line'}}>\n                <CardContent>\n                    <Typography variant=\"body1\" component=\"p\">\n                        {cleanedMessage}\n                    </Typography>\n                </CardContent>\n                <CardActions>\n                    <div style={{width: '50%', float: 'left', padding: '0 8px'}}>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            {moment(this.props.message.timestamp * 1000).format(\"DD/MM/YYYY HH:mm:ss\")}\n                        </Typography>\n                    </div>\n                    <div style={{width: '50%', float: 'right', padding: '0 8px', textAlign: 'right'}}>\n                        <Button size=\"small\" color=\"primary\" onClick={() => this.handleModal(true)}>\n                            Details\n                        </Button>\n                    </div>\n                </CardActions>\n                <DetailsModal open={this.state.modalOpen} handleModal={this.handleModal} message={this.props.message} channel={this.props.channel}/>\n            </Card>\n        )\n        return <div>{this.props.message.message}</div>\n    }\n}\n\nexport default Message\n","// nano-webgl-pow\n// Nano Currency Proof of Work Value generation using WebGL2\n// Author:  numtel <ben@latenightsketches.com>\n// License: MIT\n\n// window.NanoWebglPow(hashHex, threshold, width, height, callback, progressCallback);\n// @param hashHex           String   Previous Block Hash as Hex String\n// @param threshold         String   Optional difficulty threshold (default=0xFFFFFFF8 since v21)\n//   Pass undefined to use default\n// @param width             Int      Gpu load 1, must be power of 2 (default=512)\n// @param height            Int      Gpu load 2, must be power of 2 (default=512)\n// @param callback          Function Called when work value found\n//   Receives single string argument, work value as hex\n// @param progressCallback  Function Optional\n//   Receives single argument: n, number of frames so far\n//   Return true to abort\n\nconst defaultThreshold = '0xFFFFFFF8'\nconst defaultSize = 512\n\nfunction array_hex(arr, index, length) {\n  let out='';\n  for(let i=length - 1;i>-1;i--) {\n    out+=(arr[i] > 15 ? '' : '0') + arr[i].toString(16);\n  }\n  return out;\n}\n\nfunction hex_reverse(hex) {\n  let out='';\n  for(let i=hex.length;i>0;i-=2) {\n    out+=hex.slice(i-2,i);\n  }\n  return out;\n}\n\nexport function calculate(hashHex, threshold = defaultThreshold, width = defaultSize, height = defaultSize, callback, progressCallback) {\n  const canvas = document.createElement('canvas');\n\n  canvas.width = width;\n  canvas.height = height;\n\n  const gl = canvas.getContext('webgl2');\n\n  if(!gl)\n    throw new Error('webgl2_required');\n\n  if(!/^[A-F-a-f0-9]{64}$/.test(hashHex))\n    throw new Error('invalid_hash');\n\n  gl.clearColor(0, 0, 0, 1);\n\n  const reverseHex = hex_reverse(hashHex);\n\n  // Vertext Shader\n  const vsSource = `#version 300 es\n    precision highp float;\n    layout (location=0) in vec4 position;\n    layout (location=1) in vec2 uv;\n    out vec2 uv_pos;\n    void main() {\n      uv_pos = uv;\n      gl_Position = position;\n    }`;\n\n  // Fragment shader\n  const fsSource = `#version 300 es\n    precision highp float;\n    precision highp int;\n    in vec2 uv_pos;\n    out vec4 fragColor;\n    // Random work values\n    // First 2 bytes will be overwritten by texture pixel position\n    // Second 2 bytes will be modified if the canvas size is greater than 256x256\n    uniform uvec4 u_work0;\n    // Last 4 bytes remain as generated externally\n    uniform uvec4 u_work1;\n    // Defined separately from uint v[32] below as the original value is required\n    // to calculate the second uint32 of the digest for threshold comparison\n    #define BLAKE2B_IV32_1 0x6A09E667u\n    // Both buffers represent 16 uint64s as 32 uint32s\n    // because that's what GLSL offers, just like Javascript\n    // Compression buffer, intialized to 2 instances of the initialization vector\n    // The following values have been modified from the BLAKE2B_IV:\n    // OUTLEN is constant 8 bytes\n    // v[0] ^= 0x01010000u ^ uint(OUTLEN);\n    // INLEN is constant 40 bytes: work value (8) + block hash (32)\n    // v[24] ^= uint(INLEN);\n    // It's always the \"last\" compression at this INLEN\n    // v[28] = ~v[28];\n    // v[29] = ~v[29];\n    uint v[32] = uint[32](\n      0xF2BDC900u, 0x6A09E667u, 0x84CAA73Bu, 0xBB67AE85u,\n      0xFE94F82Bu, 0x3C6EF372u, 0x5F1D36F1u, 0xA54FF53Au,\n      0xADE682D1u, 0x510E527Fu, 0x2B3E6C1Fu, 0x9B05688Cu,\n      0xFB41BD6Bu, 0x1F83D9ABu, 0x137E2179u, 0x5BE0CD19u,\n      0xF3BCC908u, 0x6A09E667u, 0x84CAA73Bu, 0xBB67AE85u,\n      0xFE94F82Bu, 0x3C6EF372u, 0x5F1D36F1u, 0xA54FF53Au,\n      0xADE682F9u, 0x510E527Fu, 0x2B3E6C1Fu, 0x9B05688Cu,\n      0x04BE4294u, 0xE07C2654u, 0x137E2179u, 0x5BE0CD19u\n    );\n    // Input data buffer\n    uint m[32];\n    // These are offsets into the input data buffer for each mixing step.\n    // They are multiplied by 2 from the original SIGMA values in\n    // the C reference implementation, which refered to uint64s.\n    const int SIGMA82[192] = int[192](\n      0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,28,20,8,16,18,30,26,12,2,24,\n      0,4,22,14,10,6,22,16,24,0,10,4,30,26,20,28,6,12,14,2,18,8,14,18,6,2,26,\n      24,22,28,4,12,10,20,8,0,30,16,18,0,10,14,4,8,20,30,28,2,22,24,12,16,6,\n      26,4,24,12,20,0,22,16,6,8,26,14,10,30,28,2,18,24,10,2,30,28,26,8,20,0,\n      14,12,6,18,4,16,22,26,22,14,28,24,2,6,18,10,0,30,8,16,12,4,20,12,30,28,\n      18,22,6,0,16,24,4,26,14,2,8,20,10,20,4,16,8,14,12,2,10,30,22,18,28,6,24,\n      26,0,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,28,20,8,16,18,30,26,12,\n      2,24,0,4,22,14,10,6\n    );\n    // 64-bit unsigned addition within the compression buffer\n    // Sets v[a,a+1] += b\n    // b0 is the low 32 bits of b, b1 represents the high 32 bits\n    void add_uint64 (int a, uint b0, uint b1) {\n      uint o0 = v[a] + b0;\n      uint o1 = v[a + 1] + b1;\n      if (v[a] > 0xFFFFFFFFu - b0) { // did low 32 bits overflow?\n        o1++;\n      }\n      v[a] = o0;\n      v[a + 1] = o1;\n    }\n    // Sets v[a,a+1] += v[b,b+1]\n    void add_uint64 (int a, int b) {\n      add_uint64(a, v[b], v[b+1]);\n    }\n    // G Mixing function\n    void B2B_G (int a, int b, int c, int d, int ix, int iy) {\n      add_uint64(a, b);\n      add_uint64(a, m[ix], m[ix + 1]);\n      // v[d,d+1] = (v[d,d+1] xor v[a,a+1]) rotated to the right by 32 bits\n      uint xor0 = v[d] ^ v[a];\n      uint xor1 = v[d + 1] ^ v[a + 1];\n      v[d] = xor1;\n      v[d + 1] = xor0;\n      add_uint64(c, d);\n      // v[b,b+1] = (v[b,b+1] xor v[c,c+1]) rotated right by 24 bits\n      xor0 = v[b] ^ v[c];\n      xor1 = v[b + 1] ^ v[c + 1];\n      v[b] = (xor0 >> 24) ^ (xor1 << 8);\n      v[b + 1] = (xor1 >> 24) ^ (xor0 << 8);\n      add_uint64(a, b);\n      add_uint64(a, m[iy], m[iy + 1]);\n      // v[d,d+1] = (v[d,d+1] xor v[a,a+1]) rotated right by 16 bits\n      xor0 = v[d] ^ v[a];\n      xor1 = v[d + 1] ^ v[a + 1];\n      v[d] = (xor0 >> 16) ^ (xor1 << 16);\n      v[d + 1] = (xor1 >> 16) ^ (xor0 << 16);\n      add_uint64(c, d);\n      // v[b,b+1] = (v[b,b+1] xor v[c,c+1]) rotated right by 63 bits\n      xor0 = v[b] ^ v[c];\n      xor1 = v[b + 1] ^ v[c + 1];\n      v[b] = (xor1 >> 31) ^ (xor0 << 1);\n      v[b + 1] = (xor0 >> 31) ^ (xor1 << 1);\n    }\n    void main() {\n      int i;\n      uint uv_x = uint(uv_pos.x * ${canvas.width - 1}.);\n      uint uv_y = uint(uv_pos.y * ${canvas.height - 1}.);\n      uint x_pos = uv_x % 256u;\n      uint y_pos = uv_y % 256u;\n      uint x_index = (uv_x - x_pos) / 256u;\n      uint y_index = (uv_y - y_pos) / 256u;\n      // First 2 work bytes are the x,y pos within the 256x256 area, the next\n      //  two bytes are modified from the random generated value, XOR'd with\n      //   the x,y area index of where this pixel is located\n      m[0] = (x_pos ^ (y_pos << 8) ^ ((u_work0.b ^ x_index) << 16) ^ ((u_work0.a ^ y_index) << 24));\n      // Remaining bytes are un-modified from the random generated value\n      m[1] = (u_work1.r ^ (u_work1.g << 8) ^ (u_work1.b << 16) ^ (u_work1.a << 24));\n      // Block hash\n      m[2] = 0x${reverseHex.slice(56,64)}u;\n      m[3] = 0x${reverseHex.slice(48,56)}u;\n      m[4] = 0x${reverseHex.slice(40,48)}u;\n      m[5] = 0x${reverseHex.slice(32,40)}u;\n      m[6] = 0x${reverseHex.slice(24,32)}u;\n      m[7] = 0x${reverseHex.slice(16,24)}u;\n      m[8] = 0x${reverseHex.slice(8,16)}u;\n      m[9] = 0x${reverseHex.slice(0,8)}u;\n      // twelve rounds of mixing\n      for(i=0;i<12;i++) {\n        B2B_G(0, 8, 16, 24, SIGMA82[i * 16 + 0], SIGMA82[i * 16 + 1]);\n        B2B_G(2, 10, 18, 26, SIGMA82[i * 16 + 2], SIGMA82[i * 16 + 3]);\n        B2B_G(4, 12, 20, 28, SIGMA82[i * 16 + 4], SIGMA82[i * 16 + 5]);\n        B2B_G(6, 14, 22, 30, SIGMA82[i * 16 + 6], SIGMA82[i * 16 + 7]);\n        B2B_G(0, 10, 20, 30, SIGMA82[i * 16 + 8], SIGMA82[i * 16 + 9]);\n        B2B_G(2, 12, 22, 24, SIGMA82[i * 16 + 10], SIGMA82[i * 16 + 11]);\n        B2B_G(4, 14, 16, 26, SIGMA82[i * 16 + 12], SIGMA82[i * 16 + 13]);\n        B2B_G(6, 8, 18, 28, SIGMA82[i * 16 + 14], SIGMA82[i * 16 + 15]);\n      }\n      // Threshold test, first 4 bytes not significant,\n      //  only calculate digest of the second 4 bytes\n      if((BLAKE2B_IV32_1 ^ v[1] ^ v[17]) > ` + threshold + `u) {\n        // Success found, return pixel data so work value can be constructed\n        fragColor = vec4(\n          float(x_index + 1u)/255., // +1 to distinguish from 0 (unsuccessful) pixels\n          float(y_index + 1u)/255., // Same as previous\n          float(x_pos)/255., // Return the 2 custom bytes used in work value\n          float(y_pos)/255.  // Second custom byte\n        );\n      }\n    }`;\n\n  const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n  gl.shaderSource(vertexShader, vsSource);\n  gl.compileShader(vertexShader);\n\n  if(!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS))\n    throw gl.getShaderInfoLog(vertexShader);\n\n  const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n  gl.shaderSource(fragmentShader, fsSource);\n  gl.compileShader(fragmentShader);\n\n  if(!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS))\n    throw gl.getShaderInfoLog(fragmentShader);\n\n  const program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n\n  if(!gl.getProgramParameter(program, gl.LINK_STATUS))\n    throw gl.getProgramInfoLog(program);\n\n  gl.useProgram(program);\n\n  // Construct simple 2D geometry\n  const triangleArray = gl.createVertexArray();\n  gl.bindVertexArray(triangleArray);\n\n  // Vertex Positions, 2 triangles\n  const positions = new Float32Array([\n    -1,-1,0, -1,1,0, 1,1,0,\n    1,-1,0, 1,1,0, -1,-1,0\n  ]);\n  const positionBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, positions, gl.STATIC_DRAW);\n  gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);\n  gl.enableVertexAttribArray(0);\n\n  // Texture Positions\n  const uvPosArray = new Float32Array([\n    1,1, 1,0, 0,0,   0,1, 0,0, 1,1\n  ]);\n  const uvBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, uvBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, uvPosArray, gl.STATIC_DRAW);\n  gl.vertexAttribPointer(1, 2, gl.FLOAT, false, 0, 0);\n  gl.enableVertexAttribArray(1);\n\n  const work0Location = gl.getUniformLocation(program, 'u_work0');\n  const work1Location = gl.getUniformLocation(program, 'u_work1');\n\n  // Draw output until success or progressCallback says to stop\n  const work0 = new Uint8Array(4);\n  const work1 = new Uint8Array(4);\n  let n=0;\n\n  function draw() {\n    n++;\n    window.crypto.getRandomValues(work0);\n    window.crypto.getRandomValues(work1);\n\n    gl.uniform4uiv(work0Location, Array.from(work0));\n    gl.uniform4uiv(work1Location, Array.from(work1));\n\n    // Check with progressCallback every 100 frames\n    if(n%100===0 && typeof progressCallback === 'function' && progressCallback(n))\n      return;\n\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n    const pixels = new Uint8Array(gl.drawingBufferWidth * gl.drawingBufferHeight * 4);\n    gl.readPixels(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n\n    // Check the pixels for any success\n    for(let i=0;i<pixels.length;i+=4) {\n      if(pixels[i] !== 0) {\n        // Return the work value with the custom bits\n        typeof callback === 'function' &&\n          callback(\n            array_hex(work1, 0, 4) +\n            array_hex([\n              pixels[i+2],\n              pixels[i+3],\n              work0[2] ^ (pixels[i]-1),\n              work0[3] ^ (pixels[i+1]-1)\n            ], 0, 4), n);\n        return;\n      }\n    }\n    // Nothing found yet, try again\n    window.requestAnimationFrame(draw);\n  }\n\n  // Begin generation\n  window.requestAnimationFrame(draw);\n}\n\n//window.NanoWebglPow = calculate;\n// Both width and height must be multiple of 256, (one byte)\n// but do not need to be the same,\n// matching GPU capabilities is the aim\n//window.NanoWebglPow.width = 256 * 2;\n//window.NanoWebglPow.height = 256 * 2;\n","import * as nanocurrency from 'nanocurrency'\nimport * as bigInt from 'big-integer';\nimport * as webglpow from './modules/nano-webgl-pow.js'\nimport * as blake from 'blakejs';\nimport { sha256 } from 'js-sha256';\nimport { codec } from \"rfc4648\";\nimport * as ASCIIFolder from 'fold-to-ascii/lib/ascii-folder';\n\nconst representative = 'nano_1natrium1o3z5519ifou7xii8crpxpk8y65qmkih8e8bpsjri651oza8imdd';\nconst messagePrice = '190000000000000000000000000'\nconst maxMessageBlock = 50\nconst encoding = {\n  chars: \"13456789abcdefghijkmnopqrstuwxyz\",\n  bits: 5,\n};\n\nexport async function getSeed() {\n    let seed = localStorage.getItem('seed');\n    if (seed && seed.length === 64) {\n        return seed;\n    }\n    seed = await nanocurrency.generateSeed();\n    localStorage.setItem('seed', seed);\n    localStorage.setItem('index', 0);\n    return seed;\n}\n\nexport async function getSecretKey() {\n    const seed = await getSeed();\n    const index = localStorage.getItem('index');\n    const secretKey = await nanocurrency.deriveSecretKey(seed, parseInt(index));\n    return secretKey;\n}\n\nexport async function getPublicKey() {\n    const secretKey = await getSecretKey();\n    const publicKey = await nanocurrency.derivePublicKey(secretKey);\n    return publicKey;\n}\n\nexport async function getCurrentAddr() {\n    const publicKey = await getPublicKey();\n    const address = await nanocurrency.deriveAddress(publicKey, {useNanoPrefix: true});\n    return address;\n}\n\nexport async function getNextAddress() {\n    const seed = await getSeed();\n    const index = parseInt(localStorage.getItem('index')) + 1;\n    const secretKey = await nanocurrency.deriveSecretKey(seed, index);\n    const publicKey = await nanocurrency.derivePublicKey(secretKey);\n    const address = await nanocurrency.deriveAddress(publicKey, {useNanoPrefix: true});\n    return address;\n}\n\nexport function incrementAddressIndex() {\n    const index = parseInt(localStorage.getItem('index')) + 1;\n    localStorage.setItem('index', index);\n}\n\nexport async function getDifficulty() {\n    const lastCheck = localStorage.getItem('last_difficulty_check');\n    if (lastCheck < Date.now() - (5 * 60 * 1000)) {\n        const res = await fetch(\"https://proxy.nanos.cc/proxy/?action=active_difficulty\").then(res => res.json())\n        const difficulty = {receive: res.network_receive_current, send: res.network_current};\n        localStorage.setItem('difficulty', JSON.stringify(difficulty));\n        localStorage.setItem('last_difficulty_check', Date.now());\n        return difficulty;\n    }\n    return JSON.parse(localStorage.getItem('difficulty'));\n}\n\nexport async function getAccountInfo(address) {\n    return await fetch(\"https://proxy.nanos.cc/proxy/?action=account_info&account=\" + address).then(res => res.json())\n}\n\nexport async function getAccountHistory(address) {\n    return await fetch(\"https://proxy.nanos.cc/proxy/?action=account_history&account=\" + address).then(res => res.json())\n}\n\nexport async function getPending(address, threshold = 1) {\n    return await fetch(\"https://proxy.nanos.cc/proxy/?action=pending&count=1000&source=true&sorting=true&account=\" + address + \"&threshold=\" + threshold).then(res => res.json())\n}\n\nexport async function computeWork(hash, type) {\n    try {\n        const cloudWork = await fetch('https://vox.nanos.cc/api', {\n            method: 'post',\n            body: '{\"action\": \"work_generate\", \"hash\": \"' + hash + '\"}',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n        }).then(res => res.json());\n        if (cloudWork && cloudWork.work && nanocurrency.checkWork(cloudWork.work)) {\n            return new Promise(resolve => {\n                setTimeout(() => {\n                    resolve(cloudWork.work);\n                }, 500)\n            })\n        }\n    } catch (e) {}\n    const difficulty = await getDifficulty();\n    return new Promise(resolve => {\n        const realDifficulty = '0x' + (difficulty[type].slice(0, -8))\n        webglpow.calculate(hash, realDifficulty, 1024, 256,\n            (work, n) => {\n                resolve(work);\n          }\n      )\n    })\n}\n\nexport async function processBlock(block, type) {\n    let blockString = \"\";\n    Object.keys(block).map(function(key, index) {\n        blockString += \"&block[\" + key + \"]=\" + block[key];\n        return 0;\n    });\n    const res = await fetch(\"https://proxy.nanos.cc/proxy/?action=process&json_block=true&subtype=\" + type + (encodeURIComponent(blockString).replace(/%26/g, '&').replace(/%3D/g, '='))).then(res => res.json());\n    return res.hash;\n}\n\nexport async function receiveAll(progressCallback) {\n    const address = await getCurrentAddr();\n    const publicKey = await getPublicKey();\n    const secretKey = await getSecretKey();\n    const accountInfo = await getAccountInfo(address);\n    let balance = bigInt(0)\n    let frontier = null;\n    if (accountInfo.balance && accountInfo.frontier) {\n        balance = bigInt(accountInfo.balance)\n        frontier = accountInfo.frontier;\n    }\n    const pending = await getPending(address)\n    const hashes = Object.keys(pending.blocks);\n    for (let i = 0; i < hashes.length; i++) {\n        if (progressCallback) {\n            progressCallback({done: i, total: hashes.length})\n        }\n        const block = pending.blocks[hashes[i]];\n        balance = balance.add(block.amount);\n        const receiveBlock = await nanocurrency.createBlock(secretKey, {balance: balance.toString(), representative: representative, work: \"\", link: hashes[i], previous: frontier})\n        const work = await computeWork(frontier ? frontier : publicKey, 'receive')\n        receiveBlock.block.work = work\n        frontier = await processBlock(receiveBlock.block, 'receive');\n    }\n    if (progressCallback) {\n        progressCallback({done: hashes.length, total: hashes.length})\n    }\n    return true;\n}\n\nexport function getMessageSendAddresses(message) {\n    message = clearUnicodeChars(message);\n    const messageEncoded = encodeMessage(message);\n    const chunks = messageEncoded.match(/.{51}/g) || [];\n    const addresses = chunks.map(c => {\n        return createMessageChunkAddess(c);\n    })\n    const checksum = addresses.length + '|' + sha256(messageEncoded).substring(0, 30 - addresses.length.toString().length)\n    addresses.push(createMessageChunkAddess(encodeMessage(checksum)));\n    return addresses;\n}\n\nexport function getMessageInfo(checksum) {\n    const decodedChecksum = decodeMessage(extractMessageFromAddress(checksum)).split('|');\n    if (decodedChecksum.length !== 2 || isNaN(decodedChecksum[0])) {\n        return {length: 0, hash: '0'.repeat(64)}\n    }\n    return {length: parseInt(decodedChecksum[0]), hash: decodedChecksum[1]}\n}\n\nexport function extractMessageFromAddress(address) {\n    return address.replace('nano_1', '').replace('xrb_1', '').slice(0, -8)\n}\n\nexport function encodeMessage(message) {\n    let string = '';\n    let padding = 0;\n    do {\n        string = codec.stringify((message + ' '.repeat(padding++)).split('').map((c) => c.charCodeAt(0)), encoding).replace(/=/g, '');\n    } while (string.length % 51 !== 0 && (string.length + 1) % 51 !== 0)\n    if (string.length % 51 !== 0) {\n        string += '9'\n    }\n    return string;\n}\n\nexport function clearUnicodeChars(string) {\n    const charArray = string.split('');\n    const cleanArray = ASCIIFolder.foldReplacing(string, '¤');\n    const newCharArray = charArray.map((c, index) => {\n        if (c.charCodeAt(0) < 32 || (c.charCodeAt(0) > 144 && c.charCodeAt(0) < 157) || c.charCodeAt(0) > 253) {\n            return cleanArray[index];\n        }\n        return c;\n    })\n    return newCharArray.join('');\n}\n\nexport function decodeMessage(message, returnArray = false) {\n    let charArray = [];\n    for (let i = 0; i < 2; i++) {\n        try {\n            charArray = codec.parse(message.substring(0, message.length - i), encoding, { loose: true });\n            i = 2;\n        } catch (err) {}\n    }\n    if (returnArray) {\n        return charArray;\n    }\n    return String.fromCharCode.apply(null, charArray);\n}\n\nexport function createMessageChunkAddess(partialAddress) {\n    const addressCharArray = decodeMessage('11111' + partialAddress, true).slice(3);\n    const checksum = blake.blake2b(addressCharArray, null, 5)\n    const checksumString = encodeMessage(String.fromCharCode.apply(null, checksum.reverse())).substring(0, 8);\n    return 'nano_1' + partialAddress + checksumString;\n}\n\nexport async function getBlockTimestamp(hash) {\n    const time = sessionStorage.getItem(hash + '_time');\n    if (time > 0) {\n        return time;\n    }\n    const res = await fetch('https://mynano.ninja/api/node', {\n        method: 'post',\n        body: '{\"action\": \"block_info\", \"hash\": \"' + hash + '\"}',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n    }).then(res => res.json());\n    sessionStorage.setItem(hash + '_time', res.local_timestamp);\n    return res.local_timestamp;\n}\n\nexport async function sendMessage(message, channelAddress, progressCallback) {\n    const sendAddresses = getMessageSendAddresses(message);\n    const address = await getCurrentAddr();\n    const secretKey = await getSecretKey();\n    const accountInfo = await getAccountInfo(address);\n    const nextAddress = await getNextAddress();\n    if (!accountInfo.balance || !accountInfo.frontier) {\n        return false;\n    }\n    let balance = bigInt(accountInfo.balance)\n    let frontier = accountInfo.frontier;\n    if (balance.compare(bigInt(sendAddresses.length).add(messagePrice)) < 0) {\n        return false;\n    }\n    for (let i = 0; i < sendAddresses.length + 2; i++) {\n        if (progressCallback) {\n            progressCallback({done: i, total: sendAddresses.length + 2})\n        }\n        const sendAddress = (i < sendAddresses.length) ? sendAddresses[i] : (i === sendAddresses.length ? channelAddress : nextAddress);\n        if (i !== (sendAddresses.length + 1)) {\n            balance = balance.add(bigInt((i < sendAddresses.length) ? 1 : messagePrice).add(parseInt(Date.now()/1000)).multiply(-1));\n        }\n        else {\n            balance = bigInt(0);\n        }\n        const sendBlock = await nanocurrency.createBlock(secretKey, {balance: balance.toString(), representative: representative, work: \"\", link: sendAddress, previous: frontier})\n        const work = await computeWork(frontier, 'send')\n        sendBlock.block.work = work\n        frontier = await processBlock(sendBlock.block, 'send');\n    }\n    incrementAddressIndex();\n    if (progressCallback) {\n        progressCallback({done: sendAddresses.length + 2, total: sendAddresses.length + 2})\n    }\n    return true;\n}\n\nexport async function getMessagesInChannel(channelAddress, limit = 10) {\n    const realLimit = limit;\n    const messages = [];\n    const messagesHashes = await getPending(channelAddress, messagePrice);\n    const hashes = Object.keys(messagesHashes.blocks);\n    for (let i = 0; (i < hashes.length && i < (limit + 10)); i++) {\n        messagesHashes.blocks[hashes[i]].timestamp = await getBlockTimestamp(hashes[i]);\n    }\n    hashes.sort((a, b) => {\n        if (messagesHashes.blocks[a].timestamp > messagesHashes.blocks[b].timestamp) {\n            return -1;\n        }\n        if (messagesHashes.blocks[a].timestamp < messagesHashes.blocks[b].timestamp) {\n            return 1;\n        }\n        return 0;\n    });\n    for (let i = 0; (i < hashes.length && i < (limit + 10)); i++) {\n        if (sessionStorage.getItem(hashes[i]) && sessionStorage.getItem(hashes[i]).length > 10) {\n            messages.push(JSON.parse(sessionStorage.getItem(hashes[i])));\n            continue;\n        }\n        const block = messagesHashes.blocks[hashes[i]];\n        const source = block.source;\n        const history = await getAccountHistory(source);\n        const historyBlocks = history.history;\n        let found = false;\n        for (let j = 0; (j < historyBlocks.length && j < 5); j++) {\n            if (historyBlocks[j].hash === hashes[i]) {\n                found = j;\n                break;\n            }\n        }\n        if (found !== false) {\n            const checksumBlock = historyBlocks[found + 1];\n            const messageInfo = getMessageInfo(checksumBlock.account)\n            const timestamp = historyBlocks[found]['local_timestamp']\n            let first_timestamp = 0;\n            const blocks = [];\n            if (messageInfo.length < 1 || messageInfo.length > maxMessageBlock) {\n                continue;\n            }\n            const chunks = [];\n            for (let j = found + 2; j < (messageInfo.length + found + 2); j++) {\n                blocks.push(historyBlocks[j].hash)\n                chunks.push(extractMessageFromAddress(historyBlocks[j].account));\n                if (j === (messageInfo.length + found + 1)) {\n                    first_timestamp = historyBlocks[j]['local_timestamp'];\n                }\n            }\n            chunks.reverse();\n            blocks.reverse();\n            const message = chunks.join('');\n            const hash = sha256(message);\n            if (hash.substring(0, messageInfo.hash.length) === messageInfo.hash) {\n                const messageObj = {author: block.source, timestamp: timestamp, first_timestamp: first_timestamp, message: decodeMessage(message), blocks: blocks, checksum_block: checksumBlock.hash, broadcast_block: hashes[i]};\n                messages.push(messageObj);\n                sessionStorage.setItem(hashes[i], JSON.stringify(messageObj));\n            }\n        }\n        else {\n            limit++;\n        }\n    }\n    return messages.slice(0, realLimit).sort((a, b) => {\n        if (a.timestamp > b.timestamp) {\n            return -1;\n        }\n        if (a.timestamp < b.timestamp) {\n            return 1;\n        }\n        return 0;\n    });;\n}\n\nexport async function enoughBalance(chunksCount) {\n    const address = await getCurrentAddr();\n    const accountInfo = await getAccountInfo(address);\n    let balance = bigInt(0)\n    if (accountInfo.balance && accountInfo.frontier) {\n        balance = bigInt(accountInfo.balance)\n    }\n    if (balance.compare(bigInt(chunksCount + 1).add(messagePrice)) < 0) {\n        return false;\n    }\n    else {\n        return true;\n    }\n}\n\nexport function getChannelAddress(channel) {\n    channel = clearUnicodeChars(channel.toLowerCase().trim());\n    if (channel === '') {\n        channel = ' '\n    }\n    const channelEncoded = encodeMessage(channel);\n    return createMessageChunkAddess(\"nanomsg1\" + channelEncoded.substring(0, 43));\n}\n","import React from 'react';\nimport * as moment from 'moment'\nimport * as utilities from './utilities.js'\nimport * as QRCode from 'qrcode.react'\nimport * as bigInt from 'big-integer';\nimport giphy from './giphy.png';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Link from '@material-ui/core/Link';\nimport TextField from '@material-ui/core/TextField';\n\n\nclass NewMessageModal extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {currentStep: 1, message: '', enoughBalance: false, address: '', messagePrice: '200000000000000000000000000', sendLink: '', sending: false, dynamicMessage: '', gif: '', lastGifChange: 0, progress: {done: 0, total: 0}}\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.open && prevProps.open !== this.props.open) {\n            this.setState({currentStep: 1, message: '', dynamicMessage: '', progress: {done: 0, total: 0}});\n            utilities.receiveAll().then(() => {\n                utilities.enoughBalance(0).then(res => {\n                    utilities.getCurrentAddr().then(res => {\n                        this.setState({address: res, sendLink: 'nano:' + res + '?amount=' + this.state.messagePrice});\n                    })\n                    this.setState({enoughBalance: res});\n                })\n            })\n            this.changeGif(1);\n        }\n    }\n\n    handleClose() {\n        this.props.handleModal(false);\n    }\n\n    handleMessage = (e) => {\n        this.setState({message: e.target.value.slice(0, 1450)});\n    }\n\n    goToStep2 = () => {\n        if (this.state.message.trim() === '') {\n            return;\n        }\n        if (this.state.enoughBalance) {\n            this.startSending()\n        }\n        else {\n            this.setState({currentStep: 2})\n        }\n    }\n\n    goToStep3 = () => {\n        this.setState({dynamicMessage: 'Please wait while we check the balance...'})\n        utilities.receiveAll().then(() => {\n            utilities.enoughBalance(0).then(res => {\n                this.setState({enoughBalance: res});\n                if (res) {\n                    this.startSending()\n                }\n                else {\n                    this.setState({dynamicMessage: 'The balance is not enough. Please check and try again.'})\n                }\n            })\n        })\n    }\n\n    progressCallback = (status) => {\n        this.setState({progress: status});\n        if (status.done > 0) {\n            this.changeGif((status.done === status.total) ? 2 : 1)\n        }\n    }\n\n    changeGif = (type) => {\n        if (this.state.lastGifChange > Date.now() - (1000 * 10) && type === 1) {\n            return;\n        }\n        const gifs = [];\n        gifs[1] = ['bAplZhiLAsNnG', 'QX15lZJbifeQPzcNDt', 'JIX9t2j0ZTN9S', '5Zesu5VPNGJlm', '13HBDT4QSTpveU', 'f5dv1g0Af3KNJneSC3', 'o0vwzuFwCGAFO', '13rQ7rrTrvZXlm', 'l0K4hO8mVvq8Oygjm', '11BbGyhVmk4iLS', 'xiAqCzbB3eZvG', 'UYmY3vRnWpHHO', 'jLK74MUW07RaU', '3o7qE1YN7aBOFPRw8E', 'Oj5w7lOaR5ieNpuBhn', '11JTxkrmq4bGE0', 'sANGK3xBT0ipq', '5tsjxsQXLl4GcNsd5S', '5WILqPq29TyIkVCSej', 'LHZyixOnHwDDy', 'URW2lPzihY5fq', 'UFGj6EYw5JhMQ', 'jUZmz3kAiAuLC', 'amUVFzg1wNZKg'];\n        gifs[2] = ['26u4lOMA8JKSnL9Uk', '3o6ZsZbUukGiYMf2a4', 'Rk8wCrJCrjRJ2MyLrb', 'l0Iyl55kTeh71nTXy', '3o7qDEq2bMbcbPRQ2c', 'ZdUnQS4AXEl1AERdil', 'd31w24psGYeekCZy', 'YRuFixSNWFVcXaxpmX', 'fvT39aAmEvCJi3Bgsf', '1BhG0U58TwNllcEXcd'];\n        this.setState({gif: gifs[type][Math.floor(Math.random() * gifs[type].length)], lastGifChange: Date.now()})\n    }\n\n    startSending = () => {\n        this.setState({currentStep: 3, dynamicMessage: '', sending: true, lastGifChange: Date.now()}, () => {\n            utilities.sendMessage(this.state.message, this.props.channel, this.progressCallback).then((res) => {\n                this.setState({sending: false});\n                this.props.updateMessages();\n            })\n        });\n    }\n\n    render() {\n        return (\n            <Dialog onClose={() => this.handleClose()} aria-labelledby=\"customized-dialog-title\" open={this.props.open} fullWidth={true} maxWidth={'md'} disableBackdropClick={this.state.sending} disableEscapeKeyDown={this.state.sending}>\n                <DialogTitle id=\"customized-dialog-title\" onClose={() => this.handleClose()}>\n                    New message\n                </DialogTitle>\n                <DialogContent dividers>\n                    {this.state.currentStep === 1 && (\n                        <div>\n                        <TextField\n                            autoFocus\n                            margin=\"dense\"\n                            label=\"Message\"\n                            type=\"text\"\n                            variant=\"outlined\"\n                            multiline\n                            rows={6}\n                            fullWidth\n                            value={this.state.message}\n                            onChange={(e) => this.handleMessage(e)}\n                          />\n                          <Typography variant=\"body1\" style={{marginTop: '6px'}}>\n                              {this.state.message.length} character{this.state.message.length !== 1 ? 's' : ''}{' - '}\n                              {this.state.message.length === 0 ? 0 : (Math.ceil(this.state.message.length / 31) + 3)} Nano blocks\n                          </Typography>\n                        </div>\n                    )}\n                    {this.state.currentStep === 2 && (\n                        <div>\n                            <QRCode style={{margin: '0 auto', display: 'block'}} value={this.state.sendLink} />\n                            <Typography variant=\"body1\" style={{marginTop: '6px', textAlign: 'center'}}>\n                                Please send {this.state.messagePrice / (Math.pow(10, 30))} Nano here: <Link href={this.state.sendLink}>{this.state.address}</Link>.\n                            </Typography>\n                            <Typography variant=\"body1\" style={{marginTop: '6px', textAlign: 'center'}}>\n                                Keep in mind that these funds will be transferred to burn addresses, so they will be irrecoverable.\n                            </Typography>\n                            {this.state.dynamicMessage.length > 0 && <Typography variant=\"body1\" style={{marginTop: '6px', textAlign: 'center'}}>\n                                {this.state.dynamicMessage}\n                            </Typography>}\n                         </div>\n                    )}\n                    {this.state.currentStep === 3 && (\n                        <div>\n                            <img src={'https://media.giphy.com/media/' + this.state.gif + '/giphy.gif'} style={{height: '200px', maxWidth: '100%', display: 'block', margin: '0 auto', cursor: 'pointer'}} onClick={() => window.open('https://giphy.com/gifs/' + this.state.gif, '_blank')}/>\n                            <div style={{position: 'relative', top: '-26px'}}>\n                                <img src={giphy} style={{height: '24px', float: 'left'}}/>\n                                <Link href={'https://giphy.com/gifs/' + this.state.gif} target='_blank' style={{display: 'block', float: 'left', marginLeft: '3px', padding: '4px', marginTop: '-1px', background: '#ffffff'}}>via GIPHY</Link>\n                                <div style={{float: 'none', clear: 'both'}} />\n                            </div>\n                            {(this.state.progress.done !== this.state.progress.total || this.state.progress.done === 0) ? <div>\n                                <Typography variant=\"h6\" style={{marginTop: '6px', textAlign: 'center'}}>\n                                    Sending block {this.state.progress.done + 1} of {this.state.progress.total}...\n                                </Typography>\n                                <Typography variant=\"body1\" style={{marginTop: '6px', textAlign: 'center'}}>\n                                    Please wait, this may take some time. Keep your browser open and in foreground.\n                                </Typography>\n                                <Typography variant=\"body2\" color=\"textSecondary\" style={{textAlign: 'center'}}>\n                                    (some browser pause the execution of scripts when they are in the background)\n                                </Typography>\n                            </div> :\n                            <Typography variant=\"h6\" style={{marginTop: '6px', textAlign: 'center'}}>\n                                The message has been successfully sent!\n                            </Typography>}\n                         </div>\n                    )}\n\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.handleClose()} color=\"secondary\" disabled={this.state.sending}>\n                        Close\n                    </Button>\n                    {this.state.currentStep === 1 && (\n                        <Button onClick={() => this.goToStep2()} color=\"primary\">\n                            Send\n                        </Button>\n                    )}\n                    {this.state.currentStep === 2 && (\n                        <Button onClick={() => this.goToStep3()} color=\"primary\">\n                            Next\n                        </Button>\n                    )}\n                </DialogActions>\n            </Dialog>\n        )\n    }\n}\n\nexport default NewMessageModal\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAATlBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/81zJwEn/ZmYQBgaZkjcA/5lcH5l5KMmZM/8AzP8ADRBPl/piAAAADnRSTlMAClec0PIXjfNl8AalussM5JUAAAABYktHRACIBR1IAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvUlEQVQoz43TWRaDIAwF0MggiJhKa7Xd/0brAMik9P0IXs8BQwBwaQhlHJEzShpI0wqJPlK0sXYKo6guwF5jFt17HbCQwbnGYrRdd588jozGPJ3v67cq4PEVsNr2L47xNB1PY84PxFoNec2yAYI5G2NfEqB3TIElvOU92wEDXuB5sQMOWODFMdaY3zEvbs0zy34sYpqVJWKSFTXktajpkYQszgP9RPn6A7XtUODun2aqtWKlkWvXoHqJrq7gD1jzKXk8Q5H1AAAAAElFTkSuQmCC\"","import React from 'react';\nimport * as moment from 'moment'\nimport * as utilities from './utilities.js'\nimport * as QRCode from 'qrcode.react'\nimport * as bigInt from 'big-integer';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Link from '@material-ui/core/Link';\nimport TextField from '@material-ui/core/TextField';\n\n\nclass Policy extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {currentStep: 1, message: '', enoughBalance: false, address: '', messagePrice: '2000000000000000000000000000', sendLink: '', sending: false, dynamicMessage: '', gif: '', progress: {done: 0, total: 0}}\n    }\n\n    render() {\n        return (\n            <Dialog aria-labelledby=\"customized-dialog-title\" open={this.props.open} fullWidth={true} disableBackdropClick={true} disableEscapeKeyDown={true}>\n                <DialogTitle id=\"customized-dialog-title\">\n                    Welcome! Please read this policy/agreement\n                </DialogTitle>\n                <DialogContent dividers>\n                    <Typography variant=\"body1\" style={{marginBottom: '12px'}}>\n                        This web application allows you to write and read messages in the Nano blockchain.\n                    </Typography>\n                    <Typography variant=\"body1\" style={{marginBottom: '12px'}}>\n                        All the messages you will read are in Nano's public blockchain, and are fetched directly from there, with a direct connection between your device and the api.nanos.cc node.\n                    </Typography>\n                    <Typography variant=\"body1\" style={{marginBottom: '12px'}}>\n                        Neither the author of this repository nor Github own these messages or can control them, therefore we do not assume any responsibility for the contents you will see.\n                    </Typography>\n                    <Typography variant=\"body1\" style={{marginBottom: '12px'}}>\n                        Sent messages will forever remain publicly accessible in the blockchain, there is no way to remove them.\n                    </Typography>\n                    <Typography variant=\"body1\" style={{marginBottom: '12px'}}>\n                        Please do not post content that is vulgar, offensive or against the law. Let's keep the blockchain a clean place.\n                    </Typography>\n                    <Typography variant=\"body1\" style={{marginBottom: '12px'}}>\n                        This application does not use cookies but uses localStorage and sessionStorage, technologies similar to cookies, only for technical purposes. No profiling is done, there is no advertising or other bad stuff.\n                    </Typography>\n                    <Typography variant=\"body1\" style={{marginBottom: '12px'}}>\n                        Consider the Nano you will send here as lost, as they will be sent to burn addresses.\n                    </Typography>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.props.accept()} color=\"primary\">\n                        I have read and accept\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        )\n    }\n}\n\nexport default Policy\n","import React from 'react';\nimport './App.css';\nimport Message from './Message'\nimport NewMessageModal from './NewMessageModal'\nimport Policy from './Policy'\nimport * as utilities from './utilities.js'\n\nimport { Button } from '@material-ui/core';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport { Alert, AlertTitle } from '@material-ui/lab';\nimport Link from '@material-ui/core/Link';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\n\nclass Home extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {channel: 'global', channelAddress: '', channelTimeout: null, messagesLimit: 10, messages: [], loading: false, newMessageModal: false, showPolicy: false}\n    }\n\n    componentDidMount() {\n        const policyAccepted = localStorage.getItem('policy');\n        if (policyAccepted !== 'true') {\n            this.setState({showPolicy: true});\n        }\n        else {\n            this.updateMessages();\n            setInterval(() => {\n                this.updateMessages();\n            }, (5 * 60 * 1000));\n        }\n    }\n\n    acceptPolicy = () => {\n        this.setState({showPolicy: false});\n        localStorage.setItem('policy', 'true');\n        this.updateMessages();\n        setInterval(() => {\n            this.updateMessages();\n        }, (5 * 60 * 1000));\n    }\n\n    handleChannelUpdate(e) {\n        this.state.channelTimeout && clearTimeout(this.state.channelTimeout);\n        this.setState({\n                channelTimeout: setTimeout(() => {\n                    this.updateMessages();\n                }, 500),\n                messagesLimit: 10,\n                channel: e.target.value.slice(0, 25)\n        })\n    }\n\n    changeChannel(channelName) {\n        this.setState({channel: channelName, messageLimit: 10}, () => {\n            this.updateMessages();\n        });\n    }\n\n    handleLoadMore() {\n        this.setState({messagesLimit: this.state.messagesLimit + 10}, () => {\n            this.updateMessages();\n        });\n    }\n\n    handleNewMessageModal = (state) => {\n        this.setState({newMessageModal: state})\n    }\n\n    updateMessages = async () => {\n        this.setState({loading: true});\n        const address = utilities.getChannelAddress(this.state.channel);\n        this.setState({channelAddress: address});\n        const messages = await utilities.getMessagesInChannel(address, this.state.messagesLimit);\n        this.setState({messages: messages, loading: false});\n    }\n\n    render() {\n        const messages = this.state.messages;\n        return (\n            <Container>\n                <Paper elevation={3} style={{margin: '24px 0', padding: '8px', backgroundColor: 'rgba(255,255,255,0.99)'}}>\n                    <Typography variant=\"h3\" style={{textAlign: 'center', color: '#00428e'}}>\n                        Nano Messages\n                    </Typography>\n                    <Typography variant=\"h6\" style={{textAlign: 'center', color: '#00428e'}}>\n                        Messages on the blockchain\n                    </Typography>\n                    <div>\n                        <div className=\"left-btn\">\n                            <TextField\n                                id=\"outlined-required\"\n                                label=\"Channel name\"\n                                variant=\"outlined\"\n                                size=\"small\"\n                                value={this.state.channel}\n                                onChange={(e) => this.handleChannelUpdate(e)}\n                            />\n                        </div>\n                        <div className=\"right-btn\">\n                            <Button variant=\"contained\" color=\"primary\" onClick={() => this.handleNewMessageModal(true)}>\n                                New message\n                            </Button>\n                        </div>\n                    </div>\n                    <div style={{float: 'none', clear: 'both'}} />\n                    <div style={{margin: '8px 0'}} >\n                        {messages.length > 0 ? messages.map(m => <Message key={m.broadcast_block} message={m} channel={this.state.channelAddress} />) : (!this.state.loading && (\n                            <Alert severity=\"error\">\n                                <AlertTitle>No messages found</AlertTitle>\n                                There are no messages in this channel.<br/>\n                                Try exploring the <Link href=\"#\" onClick={() => this.changeChannel('global')}>global</Link> channel,\n                                or <Link href=\"#\" onClick={() => this.handleNewMessageModal(true)}>write</Link> the first message!\n                            </Alert>\n                        ))}\n                        {this.state.messages.length === this.state.messagesLimit &&\n                            <Button variant=\"contained\" color=\"primary\" onClick={() => this.handleLoadMore()} style={{margin: '16px auto', display: 'block'}}>\n                                Load more\n                            </Button>\n                        }\n                        {this.state.loading && <CircularProgress style={{margin: '16px auto', display: 'block'}} />}\n                    </div>\n                    <hr/>\n                    <Typography variant=\"body1\" style={{textAlign: 'center'}}>\n                        <Link href=\"https://github.com/cristianlivella/nano-messages\" target=\"_blank\">github.com/cristianlivella/nano-messages</Link>\n                    </Typography>\n                    <Typography variant=\"body2\" style={{textAlign: 'center'}}>\n                        API by <Link href=\"https://api.nanos.cc/\" target=\"_blank\">api.nanos.cc</Link>, <Link href=\"https://mynano.ninja/api\" target=\"_blank\">mynano.ninja</Link> and <Link href=\"https://vox.nanos.cc/api\" target=\"_blank\">vox.nanos.cc/api</Link><br/>\n                        Background by <Link href=\"https://steemit.com/cryptocurrency/@lucasols/nano-4k-wallpapers\" target=\"_blank\">lucasols</Link><br/>\n                    </Typography>\n                </Paper>\n                <NewMessageModal open={this.state.newMessageModal} handleModal={this.handleNewMessageModal} channel={this.state.channelAddress} updateMessages={this.updateMessages}/>\n                <Policy open={this.state.showPolicy} accept={this.acceptPolicy} />\n            </Container>\n        );\n    }\n}\n\n\nexport default Home;\n","import React from 'react';\nimport './App.css';\nimport Message from './Message'\nimport NewMessageModal from './NewMessageModal'\nimport Policy from './Policy'\nimport * as utilities from './utilities.js'\nimport { sha256 } from 'js-sha256';\nimport { withRouter } from 'react-router-dom'\n\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Link from '@material-ui/core/Link';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\n\nclass Demo extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {cleaned: '', encoded: '', addresses: [], checksum: '', checksumEncoded: '', channel: '', channelEncoded: '', channelAddress: '', messageTimer: null}\n    }\n\n    componentDidMount() {\n        this.handleMessageChange('');\n        this.handleChannelChange('');\n    }\n\n    handleMessageChange(message) {\n        clearTimeout(this.state.messageTimer)\n        this.setState({\n            messageTimer: setTimeout(() => {\n                const cleaned = utilities.clearUnicodeChars(message);\n                const encoded = utilities.encodeMessage(cleaned)\n                const addresses =  utilities.getMessageSendAddresses(message)\n                const checksum = (addresses.length - 1) + '|' + sha256(encoded).substring(0, 30 - (addresses.length - 1).toString().length)\n                this.setState({\n                    cleaned: cleaned,\n                    encoded: encoded,\n                    addresses: addresses,\n                    checksum: checksum,\n                    checksumEncoded: utilities.encodeMessage(checksum)\n                })\n            }, 200)\n        })\n    }\n\n    handleChannelChange(channel) {\n        let channelClean = utilities.clearUnicodeChars(channel.toLowerCase().trim());\n        if (channelClean === '') {\n            channelClean = ' '\n        }\n        const channelEncoded = utilities.encodeMessage(channelClean);\n        this.setState({channel: channel, channelEncoded: channelEncoded.substring(0, 43), channelAddress: utilities.getChannelAddress(channel)})\n    }\n\n    render() {\n        return (\n            <Container>\n                <Paper elevation={3} style={{margin: '24px 0', padding: '8px', backgroundColor: 'rgba(255,255,255,1)'}}>\n                    <Typography variant=\"h3\" style={{textAlign: 'center', color: '#00428e'}}>\n                        Nano Messages demo\n                    </Typography>\n                    <Typography variant=\"body1\" style={{textAlign: 'center', marginBottom: '16px'}}>\n                        Click <Link href=\"#\" onClick={() => this.props.history.push(\"/\")}>here</Link> to go to the home page.\n                    </Typography>\n                    <TextField\n                        label=\"Message\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        style={{width: '100%', marginBottom: '14px'}}\n                        multiline\n                        onChange={(e) => this.handleMessageChange(e.target.value)}\n                    />\n                    <TextField\n                        label=\"Channel name\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        style={{width: '100%', marginBottom: '28px'}}\n                        value={this.state.channel}\n                        onChange={(e) => this.handleChannelChange(e.target.value.slice(0, 25))}\n                    />\n                    <TextField\n                        label=\"Message cleaned (UTF-16 1-byte)\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        style={{width: '100%', marginBottom: '14px'}}\n                        InputProps={{\n                            readOnly: true,\n                        }}\n                        multiline\n                        value={this.state.cleaned}\n                    />\n                    <TextField\n                        label=\"Message base32 encoded\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        style={{width: '100%', marginBottom: '14px'}}\n                        InputProps={{\n                            readOnly: true,\n                        }}\n                        multiline\n                        value={this.state.encoded}\n                    />\n                    <TextField\n                        label=\"Number of Nano blocks/addresses\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        style={{width: '100%', marginBottom: '14px'}}\n                        InputProps={{\n                            readOnly: true,\n                        }}\n                        multiline\n                        value={this.state.addresses.length + 1}\n                    />\n                    <TextField\n                        label=\"Checksum plain\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        style={{width: '100%', marginBottom: '14px'}}\n                        InputProps={{\n                            readOnly: true,\n                        }}\n                        multiline\n                        value={this.state.checksum}\n                    />\n                    <TextField\n                        label=\"Checksum base32 encoded\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        style={{width: '100%', marginBottom: '14px'}}\n                        InputProps={{\n                            readOnly: true,\n                        }}\n                        multiline\n                        value={this.state.checksumEncoded}\n                    />\n                    <TextField\n                        label=\"Channel encoded\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        style={{width: '100%', marginBottom: '14px'}}\n                        InputProps={{\n                            readOnly: true,\n                        }}\n                        multiline\n                        value={this.state.channelEncoded}\n                    />\n                    {this.state.addresses.map((address, index) => {\n                        return (\n                            <TextField\n                                key={\"addr\" + index}\n                                label={\"Address #\" + (index+1) + ((index + 1 == this.state.addresses.length) ? ' (checksum)' : '')}\n                                variant=\"outlined\"\n                                size=\"small\"\n                                style={{width: '100%', marginBottom: '14px'}}\n                                InputProps={{\n                                    readOnly: true,\n                                }}\n                                multiline\n                                value={address}\n                            />\n                        )\n                    })}\n                    {<TextField\n                        key={\"addr\" + this.state.addresses.length}\n                        label={\"Address #\" + (this.state.addresses.length+1) + \" (channel)\"}\n                        variant=\"outlined\"\n                        size=\"small\"\n                        style={{width: '100%', marginBottom: '14px'}}\n                        InputProps={{\n                            readOnly: true,\n                        }}\n                        multiline\n                        value={this.state.channelAddress}\n                    />}\n                </Paper>\n            </Container>\n        );\n    }\n}\n\nexport default withRouter(Demo)\n","import React from 'react';\nimport Home from './Home';\nimport Demo from './Demo';\nimport { HashRouter as Router, Switch, Route, Link, Redirect } from \"react-router-dom\";\n\nclass App extends React.Component {\n\n    render() {\n        return (\n            <Router>\n                <Switch>\n                    <Route path=\"/\" exact>\n                        <Home />\n                    </Route>\n                    <Route path=\"/demo\" exact>\n                        <Demo />\n                    </Route>\n                    <Route>\n                        <Redirect to=\"/\" />\n                    </Route>\n                </Switch>\n            </Router>\n        )\n    }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}